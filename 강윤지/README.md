# 주소창에 www.google.com을 입력하면 생기는 일

크게 데이터를 받아오는 과정, 브라우저 렌더링 과정으로 나눠볼 수 있다.

---

## 1. 데이터를 받아오는 과정

### (1) DNS 조회

- 사용자가 www.google.com을 입력하면, 먼저 브라우저는 **DNS 캐시**(브라우저 캐시 → OS 캐시 → 라우터 캐시 → ISP DNS 캐시)를 확인.
- 캐시에 없으면 **DNS 서버**에 도메인 이름을 질의(DNS Query)
- 이 과정은 계층적으로 이루어지며, 루트 DNS 서버(.) → TLD 서버(.com) → google.com 권한 네임 서버까지 따라가며 최종 IP 주소를 찾는다

### (2) IP 주소 획득

- DNS 서버는 www.google.com이 호스팅된 서버의 **IP 주소**를 반환
- 이제 브라우저는 해당 IP를 사용해 구글 웹 서버에 접근할 준비를 한다.

### (3) TCP/IP 연결 & HTTP 요청

- 브라우저는 IP 주소와 포트를 이용해 **TCP 연결**을 수행. (일반적으로 HTTPS → 443번 포트)
- 이 과정에서 **3-way Handshake**(SYN → SYN/ACK → ACK)가 이루어진다
- 이후 TLS(SSL) Handshake를 통해 HTTPS 보안 연결을 수립
- 연결이 완료되면 브라우저는 GET / HTTP/1.1 같은 **HTTP 요청**을 서버로 보낸다

### (4) 웹 서버 & WAS 처리

- 요청을 받은 **웹 서버(Apache, Nginx 등)**는 정적 리소스(HTML, CSS, 이미지)를 직접 응답하거나,
    
    **WAS(Web Application Server, 예: Tomcat, Node.js, Spring Boot)**로 요청을 넘겨 동적 처리를 수행
    
- WAS는 필요하다면 **DB에서 데이터 조회** 후 결과를 HTML/JSON 형태로 만들어 웹 서버에 전달

### (5) 응답 전달

- 최종적으로 웹 서버는 브라우저에게 **HTML 문서와 리소스**를 응답
- 이제 브라우저는 받은 데이터를 화면에 표시할 준비 시작

---

## 2. 브라우저 렌더링 과정

HTML 문서를 단순히 받았다고 해서 바로 화면에 그려지지 않는다. 브라우저는 다음 단계를 거쳐 화면을 구성한다.

### (1) DOM 트리 생성

- 브라우저는 HTML 바이트 스트림을 읽어 **문자 → 토큰 → 노드 → DOM 트리**로 변환한다.
- 이 DOM(Document Object Model)은 웹 페이지 구조를 트리 형태로 표현한 것

### (2) CSSOM 트리 생성

- CSS 파일 또한 파싱되어 **CSSOM(CSS Object Model) 트리**가 만들어진다.
- DOM과 CSSOM은 각각 **구조와 스타일**을 나타냄

### (3) Render Tree 생성

- DOM과 CSSOM을 결합하여 **렌더 트리(Render Tree)**를 생성
- 여기에는 실제로 화면에 그려질 요소만 포함된다. (예: display: none;은 제외)

### (4) Layout(배치)

- 렌더 트리를 기반으로 각 요소의 **크기, 위치**가 계산된다.

### (5) Paint(그리기)

- 계산된 정보를 기반으로 요소들이 **픽셀 단위로 그려진다.**

### (6) Reflow & Repaint

- 이후 자바스크립트 실행이나 스타일 변경이 일어나면 레이아웃이나 스타일이 다시 계산될 수 있다.
- **Reflow**: 요소의 크기/위치 재계산 필요할 때.
- **Repaint**: 색상, 배경 등 스타일만 다시 그려질 때.

---

## 3. 정리

주소창에 www.google.com을 입력하면 다음과 같은 과정을 거치게 된다.

1. **DNS 조회** → IP 획득
2. **TCP/HTTPS 연결** → 서버 요청
3. **웹 서버 & WAS** → 정적/동적 리소스 처리
4. **브라우저 렌더링 파이프라인** → DOM/CSSOM → Render Tree → Layout → Paint
